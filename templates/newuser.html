{% extends 'base.html' %}
{% block javascript_include %}{% endblock %}

{% block content %}
  <div class="header">
    <h1>{% block title %} Add a new CRSID {% endblock %}</h1>
  </div>

  {% if success %}
    <div style="max-width: 500px; margin: 2em auto 1em; padding: 1em; background-color: #d4edda; border: 1px solid #c3e6cb; color: #155724; border-radius: 4px;">
      {{ success }}
    </div>
  {% endif %}

  {% if error %}
    <div style="max-width: 500px; margin: 2em auto 1em; padding: 1em; background-color: #f8d7da; border: 1px solid #f5c6cb; color: #721c24; border-radius: 4px;">
      {{ error }}
    </div>
  {% endif %}

<div style="max-width: 500px; margin: 3em auto; padding: 2em; border: 1px solid #ddd; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); background-color: #fff;">
  <form class="pure-form" action="/api/newuser" method="post">
    <table class="pure-table" style="width: 100%; border: none;">
      <tbody>
        <tr>
          <td style="padding: 12px 8px; border: none; vertical-align: middle;">
            <label for="crsid" style="font-weight: 500; color: #333;">CRSID:</label>
          </td>
          <td style="padding: 12px 8px; border: none;">
            <input id="crsid" name="crsid" maxlength="8" required 
                   style="width: 100%; padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px;">
          </td>
        </tr>
        <tr>
          <td style="padding: 12px 8px; border: none; vertical-align: middle;">
            <label for="password" style="font-weight: 500; color: #333;">Password:</label>
          </td>
          <td style="padding: 12px 8px; border: none;">
            <input id="password" name="password" type="password" required
                   style="width: 100%; padding: 8px 12px; border: 1px solid #ccc; border-radius: 4px; font-size: 14px;">
          </td>
        </tr>
        <tr>
          <td colspan="2" style="text-align: center; padding: 20px 8px 8px; border: none;">
            <button type="submit" class="pure-button pure-button-primary" 
                    style="padding: 10px 24px; font-size: 14px; border-radius: 4px;">
              Add User
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </form>
</div>
{% endblock %}

{% block javascript %}
<script>
  // Auto-lowercase CRSID to match your Flask backend
  document.getElementById('crsid').addEventListener('input', function() {
    this.value = this.value.toLowerCase();
  });
</script>
{% endblock %}
